{"version":3,"sources":["../src/distance.js"],"names":["distance","a","b","earthRadius","pi180","lat1","lat","lat2","long1","lng","long2","Math","acos","sin","cos"],"mappings":"AAAC,eAAe,SAASA,QAAT,CAAkBC,CAAlB,EAAqBC,CAArB,EAAwB;AACpC,UAAMC,cAAc,OAApB;AACA,UAAMC,QAAQ,QAAd,CAFoC,CAEZ;;AAExB;AACA,QAAIC,OAAOJ,EAAEK,GAAF,GAAQF,KAAnB;AACA,QAAIG,OAAOL,EAAEI,GAAF,GAAQF,KAAnB;AACA,QAAII,QAAQP,EAAEQ,GAAF,GAAQL,KAApB;AACA,QAAIM,QAAQR,EAAEO,GAAF,GAAQL,KAApB;;AAEA;AACA;;;;;;;;;;;AAWA;;;;;AAKA;;;;;AAKA;;;;;;;;;;;;;;;;;;;;;AAyBA,WAAOO,KAAKC,IAAL,CAAUD,KAAKE,GAAL,CAASR,IAAT,IAAeM,KAAKE,GAAL,CAASN,IAAT,CAAf,GAA8BI,KAAKG,GAAL,CAAST,IAAT,IAAeM,KAAKG,GAAL,CAASP,IAAT,CAAf,GAA8BI,KAAKG,GAAL,CAASN,QAAME,KAAf,CAAtE,IAA6FP,WAApG;AACH","file":"distance.js","sourcesContent":["﻿export default function distance(a, b) {\r\n    const earthRadius = 6372795;\r\n    const pi180 = 0.017453; // Math.PI / 180\r\n\r\n    // перевести координаты в радианы\r\n    var lat1 = a.lat * pi180;\r\n    var lat2 = b.lat * pi180;\r\n    var long1 = a.lng * pi180;\r\n    var long2 = b.lng * pi180;\r\n\r\n    //const pi2 = 1.5707963;\r\n    /*var zz = 1, yy = 1;\r\n    function taylorSin(x) {\r\n        yy = x * x;\r\n        zz = x;\r\n        return zz - (zz *= yy) / 6 + (zz *= yy) / 120;\r\n    }\r\n    function taylorCos(x) {\r\n        yy = x * x;\r\n        zz = yy;\r\n        return 1 - (yy) / 2 + (zz *= yy) / 24;\r\n    }*/\r\n    /*function taylorArcCos(x) {\r\n        yy = x * x;\r\n        zz = x;\r\n        return pi2 - zz - (zz *= yy)/6 - 3*(zz *= yy)/40;\r\n    }*/\r\n    /*function taylorAtan(x) {\r\n        yy = x * x;\r\n        zz = x;\r\n        return zz - (zz *= yy) / 3 + (zz *= yy) / 5 - (zz *= yy) / 7 + (zz *= yy) / 9 - (zz *= yy) / 20;\r\n    }*/\r\n    /*\r\n    // косинусы и синусы широт и разницы долгот\r\n    var cl1 = taylorCos(lat1);\r\n    var cl2 = taylorCos(lat2);\r\n    var sl1 = taylorSin(lat1);\r\n    var sl2 = taylorSin(lat2);\r\n    var delta = long2 - long1;\r\n    var cdelta = taylorCos(delta);\r\n    var sdelta = taylorSin(delta);\r\n\r\n    // вычисления длины большого круга\r\n    var tmp = cl2 * cdelta;\r\n    var y = Math.sqrt(cl2 * cl2 * sdelta * sdelta + (cl1 * sl2 - sl1 * tmp) * (cl1 * sl2 - sl1 * tmp));\r\n    var x = sl1 * sl2 + cl1 * tmp;\r\n\r\n    //\r\n    var ad = Math.atan2(y, x);//taylorAtan(y/x);\r\n    var dist = Math.ceil(ad * earthRadius);//(int)Math.Round(ad * earthRadius, 0);\r\n\r\n    //console.log(dist + \" vs \" + Math.acos(Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(long1-long2))*earthRadius);\r\n    //console.log((taylorSin(lat1)*taylorSin(lat2)+taylorCos(lat1)*taylorCos(lat2)*taylorCos(long1-long2)) + \" vs \" + (Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(long1-long2)));\r\n\r\n    return dist;\r\n    */\r\n\r\n    return Math.acos(Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(long1-long2))*earthRadius;\r\n}"]}